<template>
  <AnalysisLayout
    title="ä¸–ç•Œæ•°å€¼åˆ†æ"
    subtitle="åˆ†æåœ°å›¾ã€å…µçº¿ã€é‡æ€ªã€å»ºç­‘ç­‰æ¸¸æˆä¸–ç•Œæ ¸å¿ƒæ•°å€¼"
    :tabs="tabs"
    default-tab="map"
  >
    <!-- Tab 1: äº’åŠ¨åœ°å›¾ -->
    <template #map>
      <div class="interactive-map-container">
        <WorldInteractiveMap />
      </div>
    </template>

    <!-- Tab 2: ç»æµæ•°æ® -->
    <template #economy>
      <ChartLayout :toc-items="economyTocItems">
        <section id="economy-intro" class="chart-section">
          <h2>ğŸ’° ç»æµæ•°æ®</h2>
          <p class="section-desc">åˆ†æå…µçº¿ã€å·¥èµ„ã€é‡æ€ªã€èµé‡‘ç¥ç¬¦çš„é‡‘é’±å’Œç»éªŒæ”¶ç›Šã€‚</p>
        </section>

        <section id="economy-creeps" class="chart-section">
          <h3>å…µçº¿ç»æµ</h3>
          <CreepEconomy />
        </section>

        <section id="economy-salary" class="chart-section">
          <h3>è¢«åŠ¨å·¥èµ„</h3>
          <PassiveSalary />
        </section>

        <section id="economy-neutrals" class="chart-section">
          <h3>é‡æ€ªç»æµ</h3>
          <NeutralEconomy />
        </section>

        <section id="economy-bounty" class="chart-section">
          <h3>èµé‡‘ç¥ç¬¦</h3>
          <BountyRune />
        </section>
      </ChartLayout>
    </template>

    <!-- Tab 3: å»ºç­‘æ•°æ® -->
    <template #buildings>
      <ChartLayout :toc-items="buildingsTocItems">
        <section id="buildings-intro" class="chart-section">
          <h2>ğŸ° å»ºç­‘æ•°æ®</h2>
          <p class="section-desc">é˜²å¾¡å¡”ã€å…µè¥ã€é—è¿¹çš„å±æ€§æ•°æ®å’Œæœºåˆ¶åˆ†æã€‚</p>
        </section>

        <section id="buildings-towers" class="chart-section">
          <h3>é˜²å¾¡å¡”</h3>
          <BuildingStats />
        </section>

        <section id="buildings-barracks" class="chart-section">
          <h3>å…µè¥</h3>
          <p class="placeholder">ç»„ä»¶å¼€å‘ä¸­...</p>
        </section>

        <section id="buildings-ancient" class="chart-section">
          <h3>é—è¿¹</h3>
          <p class="placeholder">ç»„ä»¶å¼€å‘ä¸­...</p>
        </section>
      </ChartLayout>
    </template>

    <!-- Tab 4: æˆ˜ç•¥èµ„æº -->
    <template #resources>
      <ChartLayout :toc-items="resourcesTocItems">
        <section id="resources-intro" class="chart-section">
          <h2>ğŸ’ æˆ˜ç•¥èµ„æº</h2>
          <p class="section-desc">è‚‰å±±ã€æŠ˜ç£¨è€…ã€è²èŠ±æ± ã€ç»éªŒç¥é¾›ã€å¼ºåŒ–ç¥ç¬¦ç­‰æˆ˜ç•¥èµ„æºçš„æœºåˆ¶å’Œä»·å€¼ã€‚</p>
        </section>

        <section id="resources-roshan" class="chart-section">
          <h3>è‚‰å±±</h3>
          <RoshanStats />
        </section>

        <section id="resources-others" class="chart-section">
          <h3>å…¶ä»–æˆ˜ç•¥èµ„æº</h3>
          <StrategicResources />
        </section>
      </ChartLayout>
    </template>
  </AnalysisLayout>
</template>

<script setup lang="ts">
import type { TocItem } from '~/components/chart/Layout.vue'
import WorldInteractiveMap from '@/components/world/InteractiveMap.vue'

// Tabé…ç½®
const tabs = [
  { name: 'map', label: 'ğŸ—ºï¸ äº’åŠ¨åœ°å›¾' },
  { name: 'economy', label: 'ğŸ’° ç»æµæ•°æ®' },
  { name: 'buildings', label: 'ğŸ° å»ºç­‘æ•°æ®' },
  { name: 'resources', label: 'ğŸ’ æˆ˜ç•¥èµ„æº' }
]

// å„Tabçš„ç›®å½•é…ç½®
const economyTocItems: TocItem[] = [
  { id: 'economy-intro', title: 'æ¦‚è¿°', level: 1 },
  { id: 'economy-creeps', title: 'å…µçº¿ç»æµ', level: 2 },
  { id: 'economy-salary', title: 'è¢«åŠ¨å·¥èµ„', level: 2 },
  { id: 'economy-neutrals', title: 'é‡æ€ªç»æµ', level: 2 },
  { id: 'economy-bounty', title: 'èµé‡‘ç¥ç¬¦', level: 2 }
]

const buildingsTocItems: TocItem[] = [
  { id: 'buildings-intro', title: 'æ¦‚è¿°', level: 1 },
  { id: 'buildings-towers', title: 'é˜²å¾¡å¡”', level: 2 },
  { id: 'buildings-barracks', title: 'å…µè¥', level: 2 },
  { id: 'buildings-ancient', title: 'é—è¿¹', level: 2 }
]

const resourcesTocItems: TocItem[] = [
  { id: 'resources-intro', title: 'æ¦‚è¿°', level: 1 },
  { id: 'resources-roshan', title: 'è‚‰å±±', level: 2 },
  { id: 'resources-others', title: 'å…¶ä»–æˆ˜ç•¥èµ„æº', level: 2 }
]
</script>

<style scoped>
.chart-section {
  margin-bottom: 2rem;
}

.chart-section h2 {
  margin: 0 0 0.5rem 0;
  font-size: 1.5rem;
  color: #1f2937;
}

.chart-section h3 {
  margin: 0 0 1rem 0;
  font-size: 1.1rem;
  color: #374151;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid #e5e7eb;
}

.section-desc {
  color: #6b7280;
  margin: 0 0 1.5rem 0;
  line-height: 1.6;
}

.placeholder {
  color: #9ca3af;
  text-align: center;
  padding: 3rem;
  background: #f9fafb;
  border-radius: 8px;
  border: 1px dashed #d1d5db;
}

.interactive-map-container {
  display: grid;
  grid-template-rows: 1fr;
  height: 100%;
  min-height: 0;
}
</style>
