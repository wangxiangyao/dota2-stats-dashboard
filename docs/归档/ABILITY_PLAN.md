# 技能数值分析计划 v2

## 核心目标

**全面分析技能的出伤效率**，通过多维度表格揭示技能设计的底层逻辑。

---

## 数据准备

> **数据范围说明**：以下所有分析均基于**主动技能**，不包括被动技能。被动技能无CD/蓝耗，不适合效率分析。

### 数据源

- `abilities/active.json` - 主动技能数据（含 types 标签和 is_ultimate 标记）
- `abilities/passive.json` - 被动技能数据（仅用于参考）
- `heroes.json` - 英雄数据（含主属性和基础数值）

### 数据结构

```typescript
interface HeroAbility {
  internalName: string      // 如 "lina_laguna_blade"
  name: string              // 如 "Laguna Blade"
  description: string       // 技能描述
  behavior: string          // 行为类型
  damageType: string | null // Physical/Magical/Pure
  cooldown: string | string[] | null   // 可能是数组
  manaCost: string | string[] | null   // 可能是数组
  attributes: Attribute[]   // 核心数值在这里
  heroName: string          // 所属英雄
}

interface Attribute {
  key: string               // damage, duration, radius, stun_duration...
  header: string            // DAMAGE:, DURATION:...
  value: string | string[]  // 单值或多级
  generated?: boolean       // 是否自动生成
}
```

---

## 技能分类体系

技能太复杂，需要**多维度分类**才能有效分析。这些分类不仅是标签，更是**分析维度**。

### 维度1: 按技能槽位（最重要）

**为什么重要**: 大招和普通技能的设计逻辑完全不同

| 类型 | 定义 | 等级数 | 设计特点 | 分析策略 |
|------|------|--------|----------|----------|
| **普通技能** | 技能槽1-3 | 4级 | 基础技能，频繁使用 | 看平均水平和成长规律 |
| **大招** | 技能槽4 | 3级 | 终极技能，长CD | 看与普通技能的比例关系 |
| **特殊技能** | 技能槽5+ | 变化 | A杖技能、天赋技能 | 单独分析 |

**分析价值**:
- 大招伤害是普通技能的几倍？（验证大招定位）
- 大招CD是普通技能的几倍？（验证大招定位）
- 大招蓝耗是普通技能的几倍？
- **特殊机制大招**如何处理？（见下文）

---

### 维度2: 按英雄主属性

**为什么重要**: 不同属性英雄的技能设计理念不同

| 英雄属性 | 技能特点 | 设计意图 | 分析策略 |
|----------|----------|----------|----------|
| **力量** | 偏向控制/生存 | 靠平A输出，技能是辅助 | 控制时长、生存增益 |
| **敏捷** | 偏向物理爆发 | 靠平A输出，技能是爆发 | 物理伤害、逃生技能 |
| **智力** | 偏向魔法输出 | 靠技能输出，技能是核心 | 魔法伤害、高蓝耗 |
| **全能** | 均衡型 | 可切换定位 | 全属性增益 |

**分析价值**:
- 验证"法师靠技能，物理靠平A"的设计假设
- 智力英雄技能伤害是否显著高于其他？
- 力量英雄技能是否更多控制/生存向？

---

### 维度3: 按技能功能类型

**为什么重要**: 不同功能技能的设计规律不同

| 功能类型 | 定义 | 设计约束 | 分析策略 |
|----------|------|----------|----------|
| **伤害技能** | 有伤害值 | 需平衡伤害/CD/蓝 | 伤害分布、DPS、蓝效 |
| **控制技能** | 眩晕/沉默/减速 | 控制时长需严格限制 | 控制时长分布、控制率 |
| **增益技能** | Buff队友/自己 | 时长和强度需限制 | 增益效率、持续时间 |
| **生存技能** | 护盾/治疗/逃生 | 强力技能需高CD | 生存价值、CD代价 |
| **机动技能** | 位移/隐身 | 高价值技能 | CD代价、距离 |
| **综合技能** | 伤害+控制 | 需双重削弱 | 伤害控制权衡 |

**分析价值**:
- 不同功能技能的数值约束不同
- "鱼和熊掌不可兼得"的平衡体现
- 综合技能是否真的"双重削弱"了？

---

### 维度4: 按目标类型

**为什么重要**: 目标类型影响技能价值

| 目标类型 | 定义 | 设计特点 | 分析策略 |
|----------|------|----------|----------|
| **单体指向** | Unit Target | 精准打击，伤害可高 | 伤害上限 |
| **自身释放** | No Target | 自身增益或AOE | 通常是核心技能 |
| **地点指向** | Point | AOE或远程打击 | 范围与伤害权衡 |
| **被动** | Passive | 无CD无消耗 | 数值体现在被动效果 |

**分析价值**:
- 单体技能伤害是否高于AOE？（范围vs伤害权衡）
- 被动技能如何设计？（无代价的收益）

---

### 维度5: 按伤害类型

**为什么重要**: 不同伤害类型的护甲/魔抗收益不同

| 伤害类型 | 计算公式 | 免伤机制 | 设计补偿 |
|----------|----------|----------|----------|
| **Physical** | 伤害×(1-护甲减伤) | 护甲 | 是否有数值补偿？ |
| **Magical** | 伤害×(1-魔抗) | 魔抗 | 基础25%魔抗 |
| **Pure** | 伤害×(1-0%) | 无 | 基准线？ |

**分析价值**:
- 物理伤害因为护甲机制，数值是否更高？
- 纯粹伤害作为"无法免疫"，数值是否更低？

---

### 维度6: 特殊机制技能

**为什么重要**: 这些技能不遵循常规规律，需要单独分析

| 特殊机制 | 例子 | 分析策略 |
|----------|------|----------|
| **多重施法** | Ogre Magi大招 | 分析期望收益，而非单次数值 |
| **伤害分摊** | Invoker天火、天怒大招 | 总伤害固定，人数越多分得越少 |
| **成长型** | Medusa分裂箭 | 伤害随目标数增加 |
| **条件型** | Pudge钩中必杀 | 条件满足时的价值 |
| **消耗型** | Silencer steal | 消耗资源换取收益 |
| **叠加型** | Urn消耗灵魂 | 需要前置积累 |

**分析策略**:
- **单独表格**列出特殊技能
- 标注特殊机制
- 计算**期望值**而非单次数值

---

### 维度7: 按技能行为复杂度

**为什么重要**: 复杂技能可能数值更强（因为有操作难度）

| 复杂度 | 定义 | 例子 | 分析策略 |
|--------|------|------|----------|
| **瞬时** | 一键释放 | Storm Bolt | 标准分析 |
| **延迟判定** | 需预判 | Kunkka船 | 难度补偿？ |
| **多段释放** | 需连招 | Earthshaker | 综合收益 |
| **条件触发** | 需满足条件 | Pudge钩 | 条件价值 |

---

## 分类体系在分析中的应用

### 应用1: 所有分析都要区分普通技能 vs 大招

**原因**: 两者设计逻辑完全不同

```typescript
// 所有统计表都分开显示
{
  普通技能: { 平均伤害: XXX, 平均CD: XX, ... },
  大招: { 平均伤害: XXX, 平均CD: XX, ... },
  大招/普通比例: { 伤害: X.X倍, CD: X.X倍, ... }
}
```

### 应用2: 按英雄属性分组分析

```typescript
{
  力量英雄技能: { 平均伤害: XXX, 控制占比: XX%, ... },
  敏捷英雄技能: { 平均伤害: XXX, 控制占比: XX%, ... },
  智力英雄技能: { 平均伤害: XXX, 控制占比: XX%, ... }
}
```

### 应用3: 特殊技能单独处理

创建 `SpecialAbilityTable.vue` 列出所有特殊机制技能：

| 技能 | 英雄 | 机制 | 期望收益 | 设计逻辑 |
|------|------|------|----------|----------|
| Multicast | Ogre Magi | 2-4倍施法 | X倍价值 | ? |
| Sun Strike | Invoker | 伤害分摊 | 总伤害固定 | ? |
| ... | ... | ... | ... | ... |

---

## 出伤效率多维度分析

### 定义：什么是"出伤效率"？

出伤效率不是单一指标，而是**多维度衡量体系**：

| 维度 | 公式 | 含义 | 分析价值 |
|------|------|------|----------|
| **DPS** | 伤害 / CD | 每秒伤害 | 纯输出能力 |
| **MP-DPS** | 伤害 / 蓝耗 | 每点蓝的伤害 | 蓝量效率 |
| **DPM** | 伤害 / (CD × 蓝耗) | 综合效率 | 综合性价比 |
| **击杀效率** | 伤害 / 英雄HP × 100% | 伤害占比 | 实战价值 |
| **控制效率** | 控制时间 / CD | 控制覆盖率 | 控制价值 |
| **AOE命中数** | 伤害 × 预期命中人数 | AOE总伤害 | AOE价值 |

---

## 页签结构设计

### Tab A: 出伤效率 - 核心分析


#### A1. 【核心】技能概览：普通技能 vs 大招 ★

**所需数据**:
- 主动技能（排除被动技能）
- `is_ultimate` 字段区分普通技能和大招
- 伤害数值（从 `attributes` 中提取 `damage`）
- 冷却时间（`cooldown` 字段）
- 魔法消耗（`manaCost` 字段）
- 英雄主属性（`heroes.json` 中的 `primaryAttribute`）

**目的**: 建立整体认知，看清"大招比普通技能强几倍"

| 统计维度 | 普通技能 | 大招 | 大招/普通 | 设计逻辑 |
|----------|----------|------|-----------|----------|
| 技能数量 | XXX | XXX | - | ? |
| 平均伤害 | XXX | XXX | X.X倍 | ? |
| 平均CD | XX | XX | X.X倍 | ? |
| 平均蓝耗 | XX | XX | X.X倍 | ? |
| 平均DPS | XX | XX | X.X倍 | ? |
| 平均蓝效 | XX | XX | X.X倍 | ? |

**按英雄属性细分**:

| 英雄属性 | 普通技能伤害 | 大招伤害 | 大招/普通 | 设计逻辑 |
|----------|--------------|----------|-----------|----------|
| 力量 | XXX | XXX | X.X倍 | ? |
| 敏捷 | XXX | XXX | X.X倍 | ? |
| 智力 | XXX | XXX | X.X倍 | ? |

**分析结论方向**:
- 大招伤害是普通技能的几倍？这个比例是否合理？
- 大招CD和蓝耗是否也成比例增长？还是会有"代价"？
- 不同属性英雄的大招是否有差异？

#### A2. 伤害数值分布规律

**所需数据**:
- 主动技能中的伤害类技能（`damageType` 不为 null）
- 伤害数值（从 `attributes` 中提取 `damage`）
- `is_ultimate` 字段用于分组

**目的**: 找出Dota2技能伤害的设计区间和规律

**A2.1 普通技能伤害分布**

| 统计维度 | 数值 | 设计逻辑 |
|----------|------|----------|
| 所有技能伤害中位数 | XXX | 技能伤害的"基准线" |
| 伤害25分位数 | XXX | 低伤技能的上限 |
| 伤害75分位数 | XXX | 高伤技能的下限 |
| 伤害标准差 | XXX | 技能伤害的离散程度 |

**A2.2 大招伤害分布**

| 统计维度 | 数值 | 设计逻辑 |
|----------|------|----------|
| 大招伤害中位数 | XXX | 大招伤害的"基准线" |
| 大招伤害25分位数 | XXX | 低伤大招的上限 |
| 大招伤害75分位数 | XXX | 高伤大招的下限 |
| 大招伤害标准差 | XXX | 大招伤害的离散程度 |

**图表**: 伤害分布直方图 + 分位数标记

**分析结论方向**:
- Dota2设计师认为"合理的技能伤害"应该在什么区间？
- 为什么是这个区间？
- 这个区间如何指导新英雄设计？

#### A3. 按伤害类型分组分析

**所需数据**:
- 主动技能中的伤害类技能
- `damageType` 字段（Physical/Magical/Pure）
- 伤害数值
- `is_ultimate` 字段用于分组

**目的**: 不同伤害类型的设计规律

| 伤害类型 | 普通技能 | 大招 | 设计特点 |
|----------|----------|------|----------|
| Physical | XXX | XXX | ? |
| Magical | XXX | XXX | ? |
| Pure | XXX | XXX | ? |

**分析结论方向**:
- 哪种伤害类型数值最高/最低？为什么？
- 纯粹伤害的设计定位是什么？（克制高护甲？）
- 物理伤害是否因为护甲机制而补偿更高数值？

#### A4. 按英雄属性分组分析

**所需数据**:
- 主动技能
- 英雄主属性（从 `heroes.json` 获取 `primaryAttribute`）
- 伤害数值
- `is_ultimate` 字段用于分组

**目的**: 不同属性英雄的技能设计规律

| 英雄属性 | 技能数 | 普通技能伤害 | 大招伤害 | 大招/普通 | 设计特点 |
|----------|--------|--------------|----------|-----------|----------|
| 力量 | XX | XXX | XXX | X.X倍 | ? |
| 敏捷 | XX | XXX | XXX | X.X倍 | ? |
| 智力 | XX | XXX | XXX | X.X倍 | ? |

**分析结论方向**:
- 智力英雄技能伤害最高吗？（因为他们靠技能输出）
- 力量英雄技能伤害最低吗？（因为他们靠平A）
- 这种设计如何平衡"法师"和"物理核心"？

#### A5. 按技能功能类型分组分析 ★新增

**所需数据**:
- 主动技能（含分类标签的 `abilities/active.json`）
- `types` 字段（伤害/眩晕/减速/治疗/其他）
- 伤害数值
- 控制时长（从 `attributes` 中提取 `stun_duration` 等）

**目的**: 不同功能技能的设计规律

| 功能类型 | 技能数 | 平均伤害 | 平均控制 | 设计特点 |
|----------|--------|----------|----------|----------|
| 伤害技能 | XX | XXX | 0 | 纯输出 |
| 控制技能 | XX | 0 | X.X | 纯控制 |
| 综合技能 | XX | XXX | X.X | 伤害+控制 |
| 增益技能 | XX | 0 | 0 | Buff |
| 生存技能 | XX | 0 | 0 | 护盾/治疗/逃生 |
| 机动技能 | XX | 0 | 0 | 位移/隐身 |

**分析结论方向**:
- 伤害技能和控制技能的数值如何权衡？
- 综合技能是否真的"双重削弱"了？
- 生存/机动技能的代价是什么？

#### A6. 技能等级成长分析

**所需数据**:
- 主动技能
- 多等级数值（`damage`、`cooldown`、`manaCost` 为数组格式）

**目的**: 分析技能数值随等级成长的规律

| 等级 | 1级平均 | 2级平均 | 3级平均 | 4级平均 | 成长率 | 设计逻辑 |
|------|---------|---------|---------|---------|--------|----------|
| 伤害 | XXX | XXX | XXX | XXX | XX% | 每级增长多少？ |
| CD | XX | XX | XX | XX | XX% | CD如何成长？ |
| 蓝耗 | XX | XX | XX | XX | XX% | 蓝耗如何成长？ |

**分析结论方向**:
- 技能每级成长比例是固定的吗？
- CD成长比伤害成长快/慢？有什么设计意图？

#### A7. 伤害/CD/蓝耗的相关性分析

**所需数据**:
- 主动技能中的伤害类技能
- 伤害数值
- 冷却时间
- 魔法消耗

**目的**: 分析伤害、CD、蓝耗三者之间的相关性

| 相关关系 | 相关系数 | 散点图 | 设计逻辑 |
|----------|----------|--------|----------|
| 伤害 vs CD | X.XX | [图] | 高伤技能CD更长吗？ |
| 伤害 vs 蓝耗 | X.XX | [图] | 高伤技能耗蓝更多吗？ |
| CD vs 蓝耗 | X.XX | [图] | 长CD技能耗蓝更多吗？ |

**分析结论方向**:
- 三者是否存在"此消彼长"的平衡？
- 是否存在"高伤+短CD+低耗"的强势技能？
- 设计师如何用这三者做平衡？

---

### Tab B: 击杀效率分析

#### B1. 伤害 vs 血量的历史演变

**所需数据**:
- 主动技能中的伤害类技能
- 伤害数值（各级）
- 英雄数据（`heroes.json`）：基础血量、力量成长

**目的**: 技能伤害在不同游戏阶段的价值

| 游戏阶段 | 平均英雄HP | 平均技能伤害 | 伤害占比 | 几技能击杀 | 设计逻辑 |
|----------|-----------|-------------|----------|-----------|----------|
| 1级 | XXX | XXX | XX% | X.X | ? |
| 6级 | XXX | XXX | XX% | X.X | ? |
| 11级 | XXX | XXX | XX% | X.X | ? |
| 16级 | XXX | XXX | XX% | X.X | ? |
| 25级 | XXX | XXX | XX% | X.X | ? |

**分析结论方向**:
- 前期技能占比高，后期占比低 → 技能前期强？
- 设计师如何平衡"技能期"和"后期期"？
- 一套技能能打死多少血的英雄？

#### B2. 伤害类型 vs 护甲/魔抗的影响

**所需数据**:
- 主动技能中的伤害类技能
- `damageType` 字段
- 伤害数值
- 英雄数据：护甲、魔抗

**目的**: 不同伤害类型的实际收益

| 伤害类型 | 原始伤害 | 平均护甲/魔抗 | 实际伤害 | 损失比例 | 设计补偿 |
|----------|----------|--------------|----------|----------|----------|
| Physical | XXX | XX护甲 | XXX | XX% | ? |
| Magical | XXX | XX%魔抗 | XXX | XX% | ? |
| Pure | XXX | - | XXX | 0% | 基准 |

**分析结论方向**:
- 物理伤害因为护甲损失多少？数值上有补偿吗？
- 魔法伤害因为魔抗损失多少？
- 纯粹伤害作为"基准"，其他两种如何平衡？

#### B3. 大招 vs 普通技能的击杀效率

**所需数据**:
- 主动技能中的伤害类技能
- `is_ultimate` 字段
- 伤害数值
- 冷却时间
- 英雄血量数据

**目的**: 大招的特殊定位

| 技能类型 | 平均伤害 | 平均CD | 伤害/CD | 占比 | 定位差异 |
|----------|----------|--------|---------|------|----------|
| 普通技能 | XXX | XX | XX | XX% | ? |
| 大招 | XXX | XX | XX | XX% | ? |

**分析结论方向**:
- 大招伤害是普通技能的几倍？
- 大招CD是普通技能的几倍？
- 大招的"性价比"更高还是更低？为什么？

---

### Tab C: 控制效率分析

#### C1. 控制技能的数值分布

**所需数据**:
- 主动技能
- 控制时长（从 `attributes` 中提取 `stun_duration`、`slow_movement`、`silence_duration` 等）
- `is_ultimate` 字段用于分组

**目的**: 控制技能的设计规律

| 控制类型 | 技能数 | 平均时长 | 中位数 | 最长 | 最短 | 设计逻辑 |
|----------|--------|----------|--------|------|------|----------|
| 眩晕 | XX | X.X | X.X | X.X | X.X | ? |
| 沉默 | XX | X.X | X.X | X.X | X.X | ? |
| 减速 | XX | X.X | X.X | X.X | X.X | ? |

**分析结论方向**:
- Dota2设计师认为"合理的控制时长"是多少？
- 为什么眩晕比沉默/减速短？
- 最长的控制是多少？是否有上限？

#### C2. 控制与伤害的关系

**所需数据**:
- 主动技能
- 伤害数值
- 控制时长（眩晕/减速/沉默）

**目的**: 伤害技能和控制技能的平衡

| 技能类型 | 占比 | 平均伤害 | 平均控制 | 伤害/CD | 控制/CD | 权衡 |
|----------|------|----------|----------|---------|---------|------|
| 纯伤害 | XX% | XXX | 0 | XX | 0 | ? |
| 纯控制 | XX% | 0 | X.X | 0 | XX% | ? |
| 伤害+控制 | XX% | XXX | X.X | XX | XX% | ? |

**分析结论方向**:
- 有伤害的技能控制时间更短？
- 有控制的技能伤害更低？
- "鱼和熊掌不可兼得"的设计如何体现？

#### C3. 控制覆盖率分析

**所需数据**:
- 主动技能中的控制类技能
- 控制时长
- 冷却时间

**目的**: 团战中的控制价值

| 控制时长 | 技能数 | 平均CD | 控制率 | 团战贡献 | 设计逻辑 |
|----------|--------|--------|--------|----------|----------|
| <1秒 | XX | XX | XX% | ? | ? |
| 1-2秒 | XX | XX | XX% | ? | ? |
| 2-3秒 | XX | XX | XX% | ? | ? |
| >3秒 | XX | XX | XX% | ? | ? |

**分析结论方向**:
- 控制率 = 控制时长 / CD
- 短控制高频 vs 长控制低频，哪种更优？
- 团战中"控制覆盖率"有多重要？

---

### Tab D: 魔法经济分析

#### D1. 蓝耗的设计分布

**所需数据**:
- 主动技能
- 魔法消耗（`manaCost` 字段）
- `is_ultimate` 字段用于分组

**目的**: 技能蓝耗的平衡规律

| 统计维度 | 数值 | 设计逻辑 |
|----------|------|----------|
| 平均蓝耗 | XXX | 基准线 |
| 蓝耗中位数 | XXX | 大部分技能在这个水平 |
| 最高蓝耗 | XXX | 上限是多少？ |
| 大招平均蓝耗 | XXX | 大招是否更耗蓝？ |

#### D2. 伤害/蓝耗效率

**所需数据**:
- 主动技能中的伤害类技能
- 伤害数值
- 魔法消耗
- `damageType` 字段用于分组

**目的**: 蓝量转化伤害的效率

| 伤害类型 | 平均伤害 | 平均蓝耗 | 伤害/蓝 | 效率排名 | 设计逻辑 |
|----------|----------|----------|---------|----------|----------|
| Physical | XXX | XX | XX | ? | ? |
| Magical | XXX | XX | XX | ? | ? |
| Pure | XXX | XX | XX | ? | ? |

**分析结论方向**:
- 哪种伤害类型的蓝效最高？
- 是否存在"高伤低耗"的强势技能？
- 设计师如何平衡蓝耗和伤害？

#### D3. 英雄蓝续航能力

**所需数据**:
- 英雄数据（`heroes.json`）：基础蓝量、智力成长
- 主动技能的蓝耗（各级）

**目的**: 蓝量限制对英雄的影响

| 英雄属性 | 平均蓝量 | 技能总蓝耗 | 可用套数 | 回蓝速度 | 续航评级 | 设计逻辑 |
|----------|----------|-----------|----------|----------|----------|----------|
| 力量 | XXX | XXX | X.X | XX | ? | ? |
| 敏捷 | XXX | XXX | X.X | XX | ? | ? |
| 智力 | XXX | XXX | X.X | XX | ? | ? |

**分析结论方向**:
- 智力英雄蓝多但技能也耗蓝？
- 力量/敏捷英雄缺蓝，是否限制了他们的技能使用？
- "缺蓝"是否是设计的一部分？

---

### Tab E: 技能范围分析

#### E1. 施法距离的分布规律

**所需数据**:
- 主动技能
- 施法距离（从 `attributes` 中提取 `abilitycastrange` 或 `cast_range`）

**目的**: 技能范围的设计区间

| 距离区间 | 技能数 | 占比 | 累计占比 | 设计逻辑 |
|----------|--------|------|----------|----------|
| <300 | XX | XX% | XX% | ? |
| 300-500 | XX | XX% | XX% | ? |
| 500-700 | XX | XX% | XX% | ? |
| >700 | XX | XX% | XX% | ? |

**分析结论方向**:
- 大部分技能的施法距离在哪个区间？
- 远程技能（>700）占比多少？是否稀有？
- 近战英雄的技能距离是否更短？

#### E2. AOE半径的分布规律

**所需数据**:
- 主动技能中的AOE类技能
- AOE半径（从 `attributes` 中提取 `radius` 或 `area_radius`）

**目的**: AOE半径的分布规律

| 半径区间 | 技能数 | 占比 | 平均伤害 | 设计逻辑 |
|----------|--------|------|----------|----------|
| <200 | XX | XX% | XXX | ? |
| 200-400 | XX | XX% | XXX | ? |
| 400-600 | XX | XX% | XXX | ? |
| >600 | XX | XX% | XXX | ? |

**分析结论方向**:
- AOE半径和伤害是否有关系？（大范围低伤害？）
- 全屏大招有多少？设计定位是什么？

#### E3. 范围与伤害的权衡

**所需数据**:
- 主动技能中的伤害类技能
- 伤害数值
- AOE半径
- 目标类型（从 `behavior` 判断单体/AOE）

**目的**: AOE技能的平衡机制

| 范围类型 | 技能数 | 平均伤害 | 平均半径 | 伤害/半径 | 设计逻辑 |
|----------|--------|----------|----------|-----------|----------|
| 单体 | XX | XXX | - | - | ? |
| 小AOE | XX | XXX | XXX | XXX | ? |
| 大AOE | XX | XXX | XXX | XXX | ? |
| 全屏 | XX | XXX | XXX | XXX | ? |

**分析结论方向**:
- 范围越大伤害越低？
- "范围 vs 伤害"的平衡公式是什么？
- 全屏大招伤害很低，但有什么特殊价值？

---

### Tab F: 特殊机制分析 ★新增

#### F1. 特殊技能列表

**所需数据**:
- 主动技能（需手动标注特殊机制技能列表）
- 技能描述（`description` 字段）

**目的**: 列出所有不遵循常规规律的技能

| 技能 | 英雄 | 机制类型 | 描述 | 分析策略 |
|------|------|----------|------|----------|
| Multicast | Ogre Magi | 多重施法 | 2-4倍施法 | 计算期望收益 |
| Sun Strike | Invoker | 伤害分摊 | 总伤害固定 | 分析不同人数的效果 |
| Split Shot | Medusa | 分裂箭 | 伤害随目标数 | 分析最大收益 |
| ... | ... | ... | ... | ... |

#### F2. 特殊技能的期望收益分析

**所需数据**:
- 手动标注的特殊机制技能列表
- 各技能的特殊参数（如多重施法次数、分摊人数等）

**目的**: 特殊技能的期望收益分析

| 技能 | 英雄 | 机制 | 输入 | 期望收益 | 与常规技能的对比 |
|------|------|------|------|----------|--------------|
| Multicast | Ogre Magi | 多重施法 | 原技能×期望次数 | =X倍常规技能 | 高出常规几倍？ |
| Sun Strike | Invoker | 伤害分摊 | 目标人数 | 总伤害/人数 | 单体伤害高吗？ |
| ... | ... | ... | ... | ... | ... |

#### F3. 特殊技能的设计逻辑

**所需数据**:
- 综合前面模块的数据，进行对比分析

**目的**: 特殊技能的设计逻辑

**分析结论方向**:
- 特殊机制如何补偿数值？
- 这些技能是否仍然遵循"平衡"原则？
- 特殊机制是否意味着更强的设计？

---

### Tab G: 综合分析 - 设计规律总结

#### G1. 技能设计的三角平衡

**所需数据**:
- 主动技能
- 伤害数值
- 控制时长
- AOE半径/施法距离

**目的**: 技能设计的三角平衡

**伤害 - 控制 - 范围** 三者如何平衡？

| 组合 | 技能数 | 代表技能 | 设计特点 | 平衡方式 |
|------|--------|----------|----------|----------|
| 高伤+无控制+小范围 | XX | ... | ? | ? |
| 中伤+控制+中范围 | XX | ... | ? | ? |
| 低伤+强控+大范围 | XX | ... | ? | ? |

**分析结论方向**:
- 是否存在"不可能三角"？
- 设计师如何在这三者间做取舍？
- 找出"完美技能"（三项都高）是否有？为什么？

#### G2. 技能数值的基准线

**所需数据**:
- 综合前面所有模块的统计数据

**目的**: 总结技能数值的基准线

总结Dota2技能设计的"黄金数值"：

| 维度 | 基准值 | 合理区间 | 设计意图 |
|------|--------|----------|----------|
| 普通技能伤害 | XXX | XXX-XXX | ? |
| 大招伤害 | XXX | XXX-XXX | ? |
| 控制时长 | X.X | X.X-X.X | ? |
| 技能CD | XX | XX-XX | ? |
| 技能蓝耗 | XX | XX-XX | ? |

**分析结论方向**:
- 超出这个区间的技能有什么特殊意义？
- 这个基准线如何指导后续新英雄设计？

#### G3. 不同定位英雄的技能特点

**所需数据**:
- 主动技能
- 英雄数据（`heroes.json`）：主属性、角色定位
- 技能分类标签（`types` 字段）

**目的**: 不同定位英雄的技能特点

| 英雄定位 | 技能伤害 | 控制能力 | 蓝耗 | 续航 | 设计逻辑 |
|----------|----------|----------|------|------|----------|
| 法师核心 | 高 | 低 | 高 | 差 | ? |
| 控制/辅助 | 低 | 高 | 中 | 中 | ? |
| 物理/后期 | 低 | 低 | 低 | 好 | ? |

**分析结论方向**:
- 技能如何服务于英雄定位？
- "法师靠技能，物理靠平A"如何体现在数值上？

---

## 数据处理层

### composables/useAbilityCalculator.ts

```typescript
export const useAbilityCalculator = () => {
  // ============ 基础提取函数 ============

  // 提取伤害值（处理多级数组）
  const extractDamage = (ability: Ability, level: number): number => {
    // 从 attributes 中找到 key="damage" 的值
    // 处理数组：["280","340","400","460"]
    // 处理百分比："50%"
  }

  // 提取冷却时间
  const extractCooldown = (ability: Ability, level: number): number => {
    // 优先用 cooldown 字段
    // 如果是 null，从 attributes 找 "cooldown"
  }

  // 提取魔法消耗
  const extractManaCost = (ability: Ability, level: number): number => {
    // 同上
  }

  // 提取控制时长
  const extractCrowdControl = (ability: Ability): number => {
    // stun_duration, silence_duration, slow_duration...
  }

  // 提取施法距离
  const extractCastRange = (ability: Ability): number => {
    // abilitycastrange
  }

  // 提取AOE半径
  const extractAOERadius = (ability: Ability): number => {
    // radius
  }

  // ============ 效率计算函数 ============

  // DPS
  const calculateDPS = (ability: Ability, level: number): number => {
    const damage = extractDamage(ability, level)
    const cd = extractCooldown(ability, level)
    return damage / cd
  }

  // 伤害/蓝
  const calculateDamagePerMana = (ability: Ability, level: number): number => {
    const damage = extractDamage(ability, level)
    const mana = extractManaCost(ability, level)
    return damage / mana
  }

  // DPM (综合效率)
  const calculateDPM = (ability: Ability, level: number): number => {
    const damage = extractDamage(ability, level)
    const cd = extractCooldown(ability, level)
    const mana = extractManaCost(ability, level)
    return damage / (cd * mana * 0.01)
  }

  // 控制率
  const calculateControlRate = (ability: Ability): number => {
    const cc = extractCrowdControl(ability)
    const cd = extractCooldown(ability, maxLevel)
    return cc / cd
  }

  // ============ 交叉分析函数 ============

  // 伤害占比（vs英雄HP）
  const calculateDamagePercent = (
    ability: Ability,
    hero: Hero,
    level: number
  ): number => {
    const damage = extractDamage(ability, level)
    const hp = calculateHP(hero, level)
    return damage / hp
  }

  // 考虑护甲/魔抗后的真实伤害
  const calculateEffectiveDamage = (
    ability: Ability,
    hero: Hero,
    level: number
  ): number => {
    const damage = extractDamage(ability, level)
    const type = ability.damageType

    if (type === 'Physical') {
      const armor = calculateArmor(hero, level)
      const reduction = 0.06 * armor / (1 + 0.06 * armor)
      return damage * (1 - reduction)
    } else if (type === 'Magical') {
      const mr = calculateMagicResistance(hero, level) / 100
      return damage * (1 - mr)
    }
    return damage // Pure
  }

  return {
    // 提取函数
    extractDamage,
    extractCooldown,
    extractManaCost,
    extractCrowdControl,
    extractCastRange,
    extractAOERadius,
    // 效率计算
    calculateDPS,
    calculateDamagePerMana,
    calculateDPM,
    calculateControlRate,
    // 交叉分析
    calculateDamagePercent,
    calculateEffectiveDamage
  }
}
```

### utils/data/attributeParser.ts

```typescript
// 专门处理属性值解析的工具函数

export const parseValue = (
  value: string | string[],
  level: number
): number => {
  // 处理数组
  if (Array.isArray(value)) {
    const idx = Math.min(level - 1, value.length - 1)
    value = value[idx]
  }

  // 去除百分比
  value = value.replace('%', '')

  // 去除单位（秒、米等）
  value = value.replace(/[秒秒米]/g, '')

  return parseFloat(value) || 0
}
```

---

## 组件规划

### components/common/（新建，通用图表组件）

| 组件 | 用途 | 说明 |
|------|------|------|
| `HistogramChart.vue` | 分布直方图 | 用于展示数值分布，技能/英雄通用 |
| `ScatterChart.vue` | 散点图 | 用于展示相关性分析，技能/英雄通用 |

### components/ability/tables/

| 组件 | 对应Tab | 用途 | 说明 |
|------|---------|------|------|
| `SkillOverviewTable.vue` | A1 | 技能概览表 | 普通技能vs大招总对比，按属性细分 |
| `DistributionTable.vue` | A2/A3 | 数值分布统计表 | 通用统计表格组件（可复用） |
| `TypeGroupTable.vue` | A4 | 按类型分组表 | 按伤害类型/功能类型分组 |
| `AttributeGroupTable.vue` | A5 | 按属性分组表 | 按英雄属性分组 |
| `FunctionGroupTable.vue` | A6 | 按功能分组表 | 按技能功能类型分组 ★新增 |
| `GrowthTable.vue` | A7 | 等级成长表 | 技能等级成长分析 |
| `CorrelationTable.vue` | A8 | 相关性分析表 | 伤害/CD/蓝耗相关性 |
| `DamageVsHPTable.vue` | B1 | 伤害vs血量表 | 不同阶段伤害占比 |
| `ArmorMagicTable.vue` | B2 | 护甲/魔抗影响表 | 伤害类型实际收益 |
| `UltimateRatioTable.vue` | B3 | 大招vs普通技能表 | 大招比例分析 |
| `CrowdControlTable.vue` | C1 | 控制分布表 | 控制技能统计 |
| `DamageControlTable.vue` | C2 | 伤害控制权衡表 | 伤害技能控制时长对比 |
| `ControlRateTable.vue` | C3 | 控制覆盖率表 | 控制率分析 |
| `ManaDistributionTable.vue` | D1 | 蓝耗分布表 | 蓝耗统计 |
| `ManaEfficiencyTable.vue` | D2 | 蓝耗效率表 | 伤害/蓝效率 |
| `HeroManaTable.vue` | D3 | 英雄续航表 | 英雄续航能力 |
| `CastRangeTable.vue` | E1 | 施法距离表 | 距离分布 |
| `AOERadiusTable.vue` | E2 | AOE半径表 | 半径分布 |
| **DamageRadiusTable.vue** | E3 | 范围vs伤害表 | 范围与伤害权衡 |
| `SpecialAbilityListTable.vue` | F1 | 特殊技能列表 | 特殊技能总表 |
| `SpecialMechanismTable.vue` | F2 | 特殊机制分析表 | 特殊机制期望收益 |

### components/ability/

| 组件 | 用途 |
|------|------|
| `AnalysisBox.vue` | 分析结论盒子 | 从common移过来即可 |

---

## 页面结构

```
pages/abilities.vue

├── Tab A: 出伤效率 - 核心分析
│   ├── A1. 【核心】技能概览：普通技能 vs 大招 ★
│   ├── A2. 伤害数值分布规律（普通技能）
│   ├── A3. 伤害数值分布规律（大招）
│   ├── A4. 按伤害类型分组分析
│   ├── A5. 按英雄属性分组分析
│   ├── A6. 按技能功能类型分组分析 ★新增
│   ├── A7. 技能等级成长分析
│   └── A8. 伤害/CD/蓝耗相关性分析
│
├── Tab B: 击杀效率
│   ├── B1. 伤害 vs 血量的历史演变
│   ├── B2. 伤害类型 vs 护甲/魔抗的影响
│   └── B3. 大招 vs 普通技能的击杀效率
│
├── Tab C: 控制效率
│   ├── C1. 控制技能的数值分布
│   ├── C2. 控制与伤害的关系
│   └── C3. 控制覆盖率分析
│
├── Tab D: 魔法经济
│   ├── D1. 蓝耗的设计分布
│   ├── D2. 伤害/蓝耗效率
│   └── D3. 英雄蓝续航能力
│
├── Tab E: 技能范围
│   ├── E1. 施法距离的分布规律
│   ├── E2. AOE半径的分布规律
│   └── E3. 范围与伤害的权衡
│
├── Tab F: 特殊机制分析 ★新增
│   ├── F1. 特殊技能列表
│   ├── F2. 特殊技能的期望收益分析
│   └── F3. 特殊技能的设计逻辑
│
└── Tab G: 综合分析 - 设计规律总结
    ├── G1. 技能设计的三角平衡
    ├── G2. 技能数值的基准线
    └── G3. 不同定位英雄的技能特点

---

## 开发顺序

### Phase 1: 基础设施
1. 创建 `composables/useAbilityCalculator.ts` - 数据提取和计算
2. 创建 `utils/data/attributeParser.ts` - 属性值解析工具
3. 创建 `components/ability/` 文件夹及子文件夹
4. 创建 `pages/abilities.vue` 页面框架

### Phase 2: 统计分析组件（Tab A）
5. 创建 `HistogramChart.vue` - 分布直方图（可放common/）
6. 创建 `ScatterChart.vue` - 散点图（可放common/）
7. 创建 `DamageDistributionTable.vue` - 伤害分布统计
8. 创建 `DamageTypeGroupTable.vue` - 按伤害类型分组
9. 创建 `AttributeGroupTable.vue` - 按英雄属性分组

### Phase 3: 其他分析模块
10. 完成Tab B-F的表格组件
11. 创建 `DesignSummaryTable.vue` - 设计规律总结表

### Phase 4: 优化
12. 添加分析结论盒子（AnalysisBox）
13. 完善样式和交互

---

## 关键设计决策

### 1. 统计分析为主，排行为辅

**核心目的**: 找出Dota2技能设计的**普遍规律**，而不是简单的排行榜

- 每个分析都给出：平均值、中位数、分位数、标准差
- 按**分组**看规律（伤害类型、英雄属性、技能等级）
- 用**图表**看分布趋势（直方图、散点图）
- 排行只是辅助，用于找极值

### 2. 分析结论引导

每个分析模块都要有"分析结论方向"的问题：

- 设计师为什么这样设计？
- 这个数值区间有什么意义？
- 不同分组之间的差异说明了什么？
- 是否存在"三角平衡"？

### 3. 表格组件的统一设计

所有统计表格包含以下列：
- **统计维度** - 分组依据
- **样本数** - 该组有多少技能
- **平均值** - 集中趋势
- **中位数** - 不受极值影响
- **分位数** - 25%/75%区间
- **标准差** - 离散程度
- **设计逻辑** - 分析结论

### 4. 图表作为补充

- **直方图**: 展示数值分布
- **散点图**: 展示两个变量的相关性
- **饼图**: 展示分组占比

---

## 预期产出

用户将能够：
1. 理解Dota2技能设计的**数值区间**和**普遍规律**
2. 发现设计师如何用数值平衡不同类型技能
3. 找出技能设计的**基准线**和**合理范围**
4. 理解"法师"和"物理核心"在技能上的定位差异
5. 发现"不可能三角"（伤害-控制-范围）的平衡机制
